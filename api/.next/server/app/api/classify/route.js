"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/classify/route";
exports.ids = ["app/api/classify/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassify%2Froute&page=%2Fapi%2Fclassify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassify%2Froute.ts&appDir=%2FUsers%2Fpreyam%2Frepo%2FNoMoreBots%2Fapi%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpreyam%2Frepo%2FNoMoreBots%2Fapi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassify%2Froute&page=%2Fapi%2Fclassify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassify%2Froute.ts&appDir=%2FUsers%2Fpreyam%2Frepo%2FNoMoreBots%2Fapi%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpreyam%2Frepo%2FNoMoreBots%2Fapi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_preyam_repo_NoMoreBots_api_src_app_api_classify_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/classify/route.ts */ \"(rsc)/./src/app/api/classify/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/classify/route\",\n        pathname: \"/api/classify\",\n        filename: \"route\",\n        bundlePath: \"app/api/classify/route\"\n    },\n    resolvedPagePath: \"/Users/preyam/repo/NoMoreBots/api/src/app/api/classify/route.ts\",\n    nextConfigOutput,\n    userland: _Users_preyam_repo_NoMoreBots_api_src_app_api_classify_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/classify/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbGFzc2lmeSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2xhc3NpZnklMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjbGFzc2lmeSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnByZXlhbSUyRnJlcG8lMkZOb01vcmVCb3RzJTJGYXBpJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnByZXlhbSUyRnJlcG8lMkZOb01vcmVCb3RzJTJGYXBpJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2U7QUFDNUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS10d2VldC1maWx0ZXItYXBpLz9kYjJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9wcmV5YW0vcmVwby9Ob01vcmVCb3RzL2FwaS9zcmMvYXBwL2FwaS9jbGFzc2lmeS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2xhc3NpZnkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jbGFzc2lmeVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2xhc3NpZnkvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcHJleWFtL3JlcG8vTm9Nb3JlQm90cy9hcGkvc3JjL2FwcC9hcGkvY2xhc3NpZnkvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2xhc3NpZnkvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassify%2Froute&page=%2Fapi%2Fclassify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassify%2Froute.ts&appDir=%2FUsers%2Fpreyam%2Frepo%2FNoMoreBots%2Fapi%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpreyam%2Frepo%2FNoMoreBots%2Fapi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/classify/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/classify/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_llm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/llm */ \"(rsc)/./src/lib/llm.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_ratelimit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/ratelimit */ \"(rsc)/./src/lib/ratelimit.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n\n\nconst requestSchema = zod__WEBPACK_IMPORTED_MODULE_4__.object({\n    tweet: zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n        text: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1).max(1000),\n        authorHandle: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional().default(\"unknown\")\n    })\n});\nasync function POST(request) {\n    try {\n        // 1. Rate Limiting\n        const ip = request.headers.get(\"x-forwarded-for\") || \"unknown\";\n        const limiter = (0,_lib_ratelimit__WEBPACK_IMPORTED_MODULE_3__.rateLimit)(ip);\n        if (!limiter.success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Too many requests\"\n            }, {\n                status: 429\n            });\n        }\n        // 2. Validation & Auth\n        const userId = request.headers.get(\"x-user-id\");\n        const userApiKey = request.headers.get(\"x-api-key\") || request.headers.get(\"x-openai-key\");\n        const provider = request.headers.get(\"x-provider\") || \"openai\";\n        if (!userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Missing x-user-id header\"\n            }, {\n                status: 400\n            });\n        }\n        const body = await request.json();\n        const parseResult = requestSchema.safeParse(body);\n        if (!parseResult.success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid request body\",\n                details: parseResult.error\n            }, {\n                status: 400\n            });\n        }\n        const { tweet } = parseResult.data;\n        // 3. Monetization Check\n        let useSystemKey = true;\n        if (userApiKey) {\n            useSystemKey = false;\n        // TODO: Validate user key format briefly?\n        } else {\n            // Check usage limit\n            const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.extensionUser.upsert({\n                where: {\n                    id: userId\n                },\n                update: {},\n                create: {\n                    id: userId\n                }\n            });\n            if (user.requestCount >= 100 && !user.isPremium) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Free limit reached\",\n                    code: \"LIMIT_REACHED\",\n                    usage: user.requestCount\n                }, {\n                    status: 402\n                });\n            }\n        }\n        // 4. Cache Check (DB)\n        const existing = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.tweet.findUnique({\n            where: {\n                id: tweet.id\n            }\n        });\n        if (existing) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                aiProbability: existing.aiProbability,\n                label: existing.aiProbability > 0.75 ? \"ai\" : \"human\",\n                cached: true\n            });\n        }\n        // 5. LLM Classification\n        const { aiProbability, reason } = await (0,_lib_llm__WEBPACK_IMPORTED_MODULE_1__.classifyTweet)(tweet.text, userApiKey || undefined, provider);\n        // 6. Store Result & Increment Usage\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.$transaction(async (tx)=>{\n            // Increment usage if using system key\n            if (useSystemKey) {\n                await tx.extensionUser.update({\n                    where: {\n                        id: userId\n                    },\n                    data: {\n                        requestCount: {\n                            increment: 1\n                        }\n                    }\n                });\n            }\n            // Ensure author exists\n            await tx.author.upsert({\n                where: {\n                    handle: tweet.authorHandle\n                },\n                update: {},\n                create: {\n                    handle: tweet.authorHandle\n                }\n            });\n            // Create tweet\n            await tx.tweet.create({\n                data: {\n                    id: tweet.id,\n                    text: tweet.text,\n                    authorHandle: tweet.authorHandle,\n                    aiProbability,\n                    isHidden: aiProbability > 0.75\n                }\n            });\n            // Log classification\n            await tx.classificationLog.create({\n                data: {\n                    tweetId: tweet.id,\n                    result: {\n                        aiProbability,\n                        reason,\n                        provider\n                    }\n                }\n            });\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            aiProbability,\n            label: aiProbability > 0.75 ? \"ai\" : \"human\",\n            reason,\n            cached: false\n        });\n    } catch (error) {\n        console.error(\"API Error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal Server Error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jbGFzc2lmeS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFDRDtBQUNKO0FBQ007QUFDcEI7QUFFeEIsTUFBTUssZ0JBQWdCRCx1Q0FBUSxDQUFDO0lBQzdCRyxPQUFPSCx1Q0FBUSxDQUFDO1FBQ2RJLElBQUlKLHVDQUFRO1FBQ1pNLE1BQU1OLHVDQUFRLEdBQUdPLEdBQUcsQ0FBQyxHQUFHQyxHQUFHLENBQUM7UUFDNUJDLGNBQWNULHVDQUFRLEdBQUdVLFFBQVEsR0FBR0MsT0FBTyxDQUFDO0lBQzlDO0FBQ0Y7QUFFTyxlQUFlQyxLQUFLQyxPQUFnQjtJQUN6QyxJQUFJO1FBQ0YsbUJBQW1CO1FBQ25CLE1BQU1DLEtBQUtELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQjtRQUNyRCxNQUFNQyxVQUFVbEIseURBQVNBLENBQUNlO1FBQzFCLElBQUksQ0FBQ0csUUFBUUMsT0FBTyxFQUFFO1lBQ3BCLE9BQU90QixrRkFBWUEsQ0FBQ3VCLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFvQixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDekU7UUFFQSx1QkFBdUI7UUFDdkIsTUFBTUMsU0FBU1QsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7UUFDbkMsTUFBTU8sYUFDSlYsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0JBQWdCSCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztRQUMxRCxNQUFNUSxXQUFZWCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQkFBaUI7UUFLdkQsSUFBSSxDQUFDTSxRQUFRO1lBQ1gsT0FBTzFCLGtGQUFZQSxDQUFDdUIsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUEyQixHQUNwQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTUksT0FBTyxNQUFNWixRQUFRTSxJQUFJO1FBQy9CLE1BQU1PLGNBQWN6QixjQUFjMEIsU0FBUyxDQUFDRjtRQUU1QyxJQUFJLENBQUNDLFlBQVlSLE9BQU8sRUFBRTtZQUN4QixPQUFPdEIsa0ZBQVlBLENBQUN1QixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO2dCQUF3QlEsU0FBU0YsWUFBWU4sS0FBSztZQUFDLEdBQzVEO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNLEVBQUVsQixLQUFLLEVBQUUsR0FBR3VCLFlBQVlHLElBQUk7UUFFbEMsd0JBQXdCO1FBQ3hCLElBQUlDLGVBQWU7UUFFbkIsSUFBSVAsWUFBWTtZQUNkTyxlQUFlO1FBQ2YsMENBQTBDO1FBQzVDLE9BQU87WUFDTCxvQkFBb0I7WUFDcEIsTUFBTUMsT0FBTyxNQUFNakMsK0NBQU1BLENBQUNrQyxhQUFhLENBQUNDLE1BQU0sQ0FBQztnQkFDN0NDLE9BQU87b0JBQUU5QixJQUFJa0I7Z0JBQU87Z0JBQ3BCYSxRQUFRLENBQUM7Z0JBQ1RDLFFBQVE7b0JBQUVoQyxJQUFJa0I7Z0JBQU87WUFDdkI7WUFFQSxJQUFJUyxLQUFLTSxZQUFZLElBQUksT0FBTyxDQUFDTixLQUFLTyxTQUFTLEVBQUU7Z0JBQy9DLE9BQU8xQyxrRkFBWUEsQ0FBQ3VCLElBQUksQ0FDdEI7b0JBQ0VDLE9BQU87b0JBQ1BtQixNQUFNO29CQUNOQyxPQUFPVCxLQUFLTSxZQUFZO2dCQUMxQixHQUNBO29CQUFFaEIsUUFBUTtnQkFBSTtZQUVsQjtRQUNGO1FBRUEsc0JBQXNCO1FBQ3RCLE1BQU1vQixXQUFXLE1BQU0zQywrQ0FBTUEsQ0FBQ0ssS0FBSyxDQUFDdUMsVUFBVSxDQUFDO1lBQzdDUixPQUFPO2dCQUFFOUIsSUFBSUQsTUFBTUMsRUFBRTtZQUFDO1FBQ3hCO1FBRUEsSUFBSXFDLFVBQVU7WUFDWixPQUFPN0Msa0ZBQVlBLENBQUN1QixJQUFJLENBQUM7Z0JBQ3ZCd0IsZUFBZUYsU0FBU0UsYUFBYTtnQkFDckNDLE9BQU9ILFNBQVNFLGFBQWEsR0FBRyxPQUFPLE9BQU87Z0JBQzlDRSxRQUFRO1lBQ1Y7UUFDRjtRQUVBLHdCQUF3QjtRQUN4QixNQUFNLEVBQUVGLGFBQWEsRUFBRUcsTUFBTSxFQUFFLEdBQUcsTUFBTWpELHVEQUFhQSxDQUNuRE0sTUFBTUcsSUFBSSxFQUNWaUIsY0FBY3dCLFdBQ2R2QjtRQUdGLG9DQUFvQztRQUNwQyxNQUFNMUIsK0NBQU1BLENBQUNrRCxZQUFZLENBQUMsT0FBT0M7WUFDL0Isc0NBQXNDO1lBQ3RDLElBQUluQixjQUFjO2dCQUNoQixNQUFNbUIsR0FBR2pCLGFBQWEsQ0FBQ0csTUFBTSxDQUFDO29CQUM1QkQsT0FBTzt3QkFBRTlCLElBQUlrQjtvQkFBTztvQkFDcEJPLE1BQU07d0JBQUVRLGNBQWM7NEJBQUVhLFdBQVc7d0JBQUU7b0JBQUU7Z0JBQ3pDO1lBQ0Y7WUFFQSx1QkFBdUI7WUFDdkIsTUFBTUQsR0FBR0UsTUFBTSxDQUFDbEIsTUFBTSxDQUFDO2dCQUNyQkMsT0FBTztvQkFBRWtCLFFBQVFqRCxNQUFNTSxZQUFZO2dCQUFDO2dCQUNwQzBCLFFBQVEsQ0FBQztnQkFDVEMsUUFBUTtvQkFBRWdCLFFBQVFqRCxNQUFNTSxZQUFZO2dCQUFDO1lBQ3ZDO1lBRUEsZUFBZTtZQUNmLE1BQU13QyxHQUFHOUMsS0FBSyxDQUFDaUMsTUFBTSxDQUFDO2dCQUNwQlAsTUFBTTtvQkFDSnpCLElBQUlELE1BQU1DLEVBQUU7b0JBQ1pFLE1BQU1ILE1BQU1HLElBQUk7b0JBQ2hCRyxjQUFjTixNQUFNTSxZQUFZO29CQUNoQ2tDO29CQUNBVSxVQUFVVixnQkFBZ0I7Z0JBQzVCO1lBQ0Y7WUFFQSxxQkFBcUI7WUFDckIsTUFBTU0sR0FBR0ssaUJBQWlCLENBQUNsQixNQUFNLENBQUM7Z0JBQ2hDUCxNQUFNO29CQUNKMEIsU0FBU3BELE1BQU1DLEVBQUU7b0JBQ2pCb0QsUUFBUTt3QkFBRWI7d0JBQWVHO3dCQUFRdEI7b0JBQVM7Z0JBQzVDO1lBQ0Y7UUFDRjtRQUVBLE9BQU81QixrRkFBWUEsQ0FBQ3VCLElBQUksQ0FBQztZQUN2QndCO1lBQ0FDLE9BQU9ELGdCQUFnQixPQUFPLE9BQU87WUFDckNHO1lBQ0FELFFBQVE7UUFDVjtJQUNGLEVBQUUsT0FBT3pCLE9BQU87UUFDZHFDLFFBQVFyQyxLQUFLLENBQUMsY0FBY0E7UUFDNUIsT0FBT3hCLGtGQUFZQSxDQUFDdUIsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQXdCLEdBQ2pDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktdHdlZXQtZmlsdGVyLWFwaS8uL3NyYy9hcHAvYXBpL2NsYXNzaWZ5L3JvdXRlLnRzPzdhMDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBjbGFzc2lmeVR3ZWV0IH0gZnJvbSBcIkAvbGliL2xsbVwiO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xuaW1wb3J0IHsgcmF0ZUxpbWl0IH0gZnJvbSBcIkAvbGliL3JhdGVsaW1pdFwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuY29uc3QgcmVxdWVzdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdHdlZXQ6IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB0ZXh0OiB6LnN0cmluZygpLm1pbigxKS5tYXgoMTAwMCksIC8vIFJlYXNvbmFibGUgdHdlZXQgbGVuZ3RoIGxpbWl0XG4gICAgYXV0aG9ySGFuZGxlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVmYXVsdChcInVua25vd25cIiksXG4gIH0pLFxufSk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyAxLiBSYXRlIExpbWl0aW5nXG4gICAgY29uc3QgaXAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtZm9yXCIpIHx8IFwidW5rbm93blwiO1xuICAgIGNvbnN0IGxpbWl0ZXIgPSByYXRlTGltaXQoaXApO1xuICAgIGlmICghbGltaXRlci5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJUb28gbWFueSByZXF1ZXN0c1wiIH0sIHsgc3RhdHVzOiA0MjkgfSk7XG4gICAgfVxuXG4gICAgLy8gMi4gVmFsaWRhdGlvbiAmIEF1dGhcbiAgICBjb25zdCB1c2VySWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC11c2VyLWlkXCIpO1xuICAgIGNvbnN0IHVzZXJBcGlLZXkgPVxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmdldChcIngtYXBpLWtleVwiKSB8fCByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1vcGVuYWkta2V5XCIpO1xuICAgIGNvbnN0IHByb3ZpZGVyID0gKHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LXByb3ZpZGVyXCIpIHx8IFwib3BlbmFpXCIpIGFzXG4gICAgICB8IFwib3BlbmFpXCJcbiAgICAgIHwgXCJnZW1pbmlcIlxuICAgICAgfCBcImFudGhyb3BpY1wiO1xuXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJNaXNzaW5nIHgtdXNlci1pZCBoZWFkZXJcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gcmVxdWVzdFNjaGVtYS5zYWZlUGFyc2UoYm9keSk7XG5cbiAgICBpZiAoIXBhcnNlUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLCBkZXRhaWxzOiBwYXJzZVJlc3VsdC5lcnJvciB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB0d2VldCB9ID0gcGFyc2VSZXN1bHQuZGF0YTtcblxuICAgIC8vIDMuIE1vbmV0aXphdGlvbiBDaGVja1xuICAgIGxldCB1c2VTeXN0ZW1LZXkgPSB0cnVlO1xuXG4gICAgaWYgKHVzZXJBcGlLZXkpIHtcbiAgICAgIHVzZVN5c3RlbUtleSA9IGZhbHNlO1xuICAgICAgLy8gVE9ETzogVmFsaWRhdGUgdXNlciBrZXkgZm9ybWF0IGJyaWVmbHk/XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENoZWNrIHVzYWdlIGxpbWl0XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLmV4dGVuc2lvblVzZXIudXBzZXJ0KHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICB1cGRhdGU6IHt9LFxuICAgICAgICBjcmVhdGU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICh1c2VyLnJlcXVlc3RDb3VudCA+PSAxMDAgJiYgIXVzZXIuaXNQcmVtaXVtKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogXCJGcmVlIGxpbWl0IHJlYWNoZWRcIixcbiAgICAgICAgICAgIGNvZGU6IFwiTElNSVRfUkVBQ0hFRFwiLFxuICAgICAgICAgICAgdXNhZ2U6IHVzZXIucmVxdWVzdENvdW50LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMiB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gNC4gQ2FjaGUgQ2hlY2sgKERCKVxuICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgcHJpc21hLnR3ZWV0LmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHR3ZWV0LmlkIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGFpUHJvYmFiaWxpdHk6IGV4aXN0aW5nLmFpUHJvYmFiaWxpdHksXG4gICAgICAgIGxhYmVsOiBleGlzdGluZy5haVByb2JhYmlsaXR5ID4gMC43NSA/IFwiYWlcIiA6IFwiaHVtYW5cIixcbiAgICAgICAgY2FjaGVkOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gNS4gTExNIENsYXNzaWZpY2F0aW9uXG4gICAgY29uc3QgeyBhaVByb2JhYmlsaXR5LCByZWFzb24gfSA9IGF3YWl0IGNsYXNzaWZ5VHdlZXQoXG4gICAgICB0d2VldC50ZXh0LFxuICAgICAgdXNlckFwaUtleSB8fCB1bmRlZmluZWQsXG4gICAgICBwcm92aWRlclxuICAgICk7XG5cbiAgICAvLyA2LiBTdG9yZSBSZXN1bHQgJiBJbmNyZW1lbnQgVXNhZ2VcbiAgICBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgICAgLy8gSW5jcmVtZW50IHVzYWdlIGlmIHVzaW5nIHN5c3RlbSBrZXlcbiAgICAgIGlmICh1c2VTeXN0ZW1LZXkpIHtcbiAgICAgICAgYXdhaXQgdHguZXh0ZW5zaW9uVXNlci51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHJlcXVlc3RDb3VudDogeyBpbmNyZW1lbnQ6IDEgfSB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5zdXJlIGF1dGhvciBleGlzdHNcbiAgICAgIGF3YWl0IHR4LmF1dGhvci51cHNlcnQoe1xuICAgICAgICB3aGVyZTogeyBoYW5kbGU6IHR3ZWV0LmF1dGhvckhhbmRsZSB9LFxuICAgICAgICB1cGRhdGU6IHt9LFxuICAgICAgICBjcmVhdGU6IHsgaGFuZGxlOiB0d2VldC5hdXRob3JIYW5kbGUgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDcmVhdGUgdHdlZXRcbiAgICAgIGF3YWl0IHR4LnR3ZWV0LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogdHdlZXQuaWQsXG4gICAgICAgICAgdGV4dDogdHdlZXQudGV4dCxcbiAgICAgICAgICBhdXRob3JIYW5kbGU6IHR3ZWV0LmF1dGhvckhhbmRsZSxcbiAgICAgICAgICBhaVByb2JhYmlsaXR5LFxuICAgICAgICAgIGlzSGlkZGVuOiBhaVByb2JhYmlsaXR5ID4gMC43NSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBMb2cgY2xhc3NpZmljYXRpb25cbiAgICAgIGF3YWl0IHR4LmNsYXNzaWZpY2F0aW9uTG9nLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0d2VldElkOiB0d2VldC5pZCxcbiAgICAgICAgICByZXN1bHQ6IHsgYWlQcm9iYWJpbGl0eSwgcmVhc29uLCBwcm92aWRlciB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgYWlQcm9iYWJpbGl0eSxcbiAgICAgIGxhYmVsOiBhaVByb2JhYmlsaXR5ID4gMC43NSA/IFwiYWlcIiA6IFwiaHVtYW5cIixcbiAgICAgIHJlYXNvbixcbiAgICAgIGNhY2hlZDogZmFsc2UsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkFQSSBFcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjbGFzc2lmeVR3ZWV0IiwicHJpc21hIiwicmF0ZUxpbWl0IiwieiIsInJlcXVlc3RTY2hlbWEiLCJvYmplY3QiLCJ0d2VldCIsImlkIiwic3RyaW5nIiwidGV4dCIsIm1pbiIsIm1heCIsImF1dGhvckhhbmRsZSIsIm9wdGlvbmFsIiwiZGVmYXVsdCIsIlBPU1QiLCJyZXF1ZXN0IiwiaXAiLCJoZWFkZXJzIiwiZ2V0IiwibGltaXRlciIsInN1Y2Nlc3MiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJ1c2VySWQiLCJ1c2VyQXBpS2V5IiwicHJvdmlkZXIiLCJib2R5IiwicGFyc2VSZXN1bHQiLCJzYWZlUGFyc2UiLCJkZXRhaWxzIiwiZGF0YSIsInVzZVN5c3RlbUtleSIsInVzZXIiLCJleHRlbnNpb25Vc2VyIiwidXBzZXJ0Iiwid2hlcmUiLCJ1cGRhdGUiLCJjcmVhdGUiLCJyZXF1ZXN0Q291bnQiLCJpc1ByZW1pdW0iLCJjb2RlIiwidXNhZ2UiLCJleGlzdGluZyIsImZpbmRVbmlxdWUiLCJhaVByb2JhYmlsaXR5IiwibGFiZWwiLCJjYWNoZWQiLCJyZWFzb24iLCJ1bmRlZmluZWQiLCIkdHJhbnNhY3Rpb24iLCJ0eCIsImluY3JlbWVudCIsImF1dGhvciIsImhhbmRsZSIsImlzSGlkZGVuIiwiY2xhc3NpZmljYXRpb25Mb2ciLCJ0d2VldElkIiwicmVzdWx0IiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/classify/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/env.ts":
/*!************************!*\
  !*** ./src/lib/env.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst envSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    DATABASE_URL: zod__WEBPACK_IMPORTED_MODULE_0__.string().url(),\n    OPENAI_API_KEY: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    GEMINI_API_KEY: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    ANTHROPIC_API_KEY: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    NODE_ENV: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"development\",\n        \"production\",\n        \"test\"\n    ]).default(\"development\")\n});\nconst env = envSchema.parse(process.env);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QjtBQUV4QixNQUFNQyxZQUFZRCx1Q0FBUSxDQUFDO0lBQ3pCRyxjQUFjSCx1Q0FBUSxHQUFHSyxHQUFHO0lBQzVCQyxnQkFBZ0JOLHVDQUFRLEdBQUdPLEdBQUcsQ0FBQztJQUMvQkMsZ0JBQWdCUix1Q0FBUSxHQUFHUyxRQUFRO0lBQ25DQyxtQkFBbUJWLHVDQUFRLEdBQUdTLFFBQVE7SUFDdENFLFVBQVVYLHdDQUNILENBQUM7UUFBQztRQUFlO1FBQWM7S0FBTyxFQUMxQ2EsT0FBTyxDQUFDO0FBQ2I7QUFFTyxNQUFNQyxNQUFNYixVQUFVYyxLQUFLLENBQUNDLFFBQVFGLEdBQUcsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXR3ZWV0LWZpbHRlci1hcGkvLi9zcmMvbGliL2Vudi50cz84NDg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmNvbnN0IGVudlNjaGVtYSA9IHoub2JqZWN0KHtcbiAgREFUQUJBU0VfVVJMOiB6LnN0cmluZygpLnVybCgpLFxuICBPUEVOQUlfQVBJX0tFWTogei5zdHJpbmcoKS5taW4oMSksXG4gIEdFTUlOSV9BUElfS0VZOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIEFOVEhST1BJQ19BUElfS0VZOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIE5PREVfRU5WOiB6XG4gICAgLmVudW0oW1wiZGV2ZWxvcG1lbnRcIiwgXCJwcm9kdWN0aW9uXCIsIFwidGVzdFwiXSlcbiAgICAuZGVmYXVsdChcImRldmVsb3BtZW50XCIpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBlbnYgPSBlbnZTY2hlbWEucGFyc2UocHJvY2Vzcy5lbnYpO1xuIl0sIm5hbWVzIjpbInoiLCJlbnZTY2hlbWEiLCJvYmplY3QiLCJEQVRBQkFTRV9VUkwiLCJzdHJpbmciLCJ1cmwiLCJPUEVOQUlfQVBJX0tFWSIsIm1pbiIsIkdFTUlOSV9BUElfS0VZIiwib3B0aW9uYWwiLCJBTlRIUk9QSUNfQVBJX0tFWSIsIk5PREVfRU5WIiwiZW51bSIsImRlZmF1bHQiLCJlbnYiLCJwYXJzZSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/llm.ts":
/*!************************!*\
  !*** ./src/lib/llm.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   classifyTweet: () => (/* binding */ classifyTweet)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./env */ \"(rsc)/./src/lib/env.ts\");\n\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    apiKey: _env__WEBPACK_IMPORTED_MODULE_2__.env.OPENAI_API_KEY\n});\nconst gemini = _env__WEBPACK_IMPORTED_MODULE_2__.env.GEMINI_API_KEY ? new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(_env__WEBPACK_IMPORTED_MODULE_2__.env.GEMINI_API_KEY) : null;\nconst anthropic = _env__WEBPACK_IMPORTED_MODULE_2__.env.ANTHROPIC_API_KEY ? new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: _env__WEBPACK_IMPORTED_MODULE_2__.env.ANTHROPIC_API_KEY\n}) : null;\nconst SYSTEM_PROMPT = \"Determine whether the following tweet is likely AI-generated or written by a real human. Respond JSON: { ai_probability: 0-1, reason: string }.\";\nasync function classifyWithOpenAI(text, apiKey) {\n    const client = apiKey ? new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n        apiKey\n    }) : openai;\n    const completion = await client.chat.completions.create({\n        messages: [\n            {\n                role: \"system\",\n                content: SYSTEM_PROMPT\n            },\n            {\n                role: \"user\",\n                content: `Tweet: ${text}`\n            }\n        ],\n        model: \"gpt-3.5-turbo\",\n        response_format: {\n            type: \"json_object\"\n        },\n        temperature: 0.3\n    });\n    const content = completion.choices[0].message.content;\n    if (!content) throw new Error(\"No content received from OpenAI\");\n    return JSON.parse(content);\n}\nasync function classifyWithGemini(text, apiKey) {\n    const client = apiKey ? new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(apiKey) : gemini;\n    if (!client) throw new Error(\"Gemini API key not configured\");\n    const model = client.getGenerativeModel({\n        model: \"gemini-pro\"\n    });\n    const result = await model.generateContent(`${SYSTEM_PROMPT}\\n\\nTweet: ${text}`);\n    const response = await result.response;\n    const textResponse = response.text();\n    // Gemini might wrap JSON in markdown code blocks\n    const jsonMatch = textResponse.match(/\\{[\\s\\S]*\\}/);\n    if (!jsonMatch) throw new Error(\"Invalid JSON response from Gemini\");\n    return JSON.parse(jsonMatch[0]);\n}\nasync function classifyWithAnthropic(text, apiKey) {\n    const client = apiKey ? new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        apiKey\n    }) : anthropic;\n    if (!client) throw new Error(\"Anthropic API key not configured\");\n    const message = await client.messages.create({\n        max_tokens: 1024,\n        messages: [\n            {\n                role: \"user\",\n                content: `${SYSTEM_PROMPT}\\n\\nTweet: ${text}`\n            }\n        ],\n        model: \"claude-3-opus-20240229\"\n    });\n    const content = message.content[0].type === \"text\" ? message.content[0].text : \"\";\n    if (!content) throw new Error(\"No content received from Anthropic\");\n    // Anthropic might wrap JSON in markdown code blocks\n    const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n    if (!jsonMatch) throw new Error(\"Invalid JSON response from Anthropic\");\n    return JSON.parse(jsonMatch[0]);\n}\nasync function classifyTweet(text, apiKey, provider = \"openai\") {\n    try {\n        let result;\n        switch(provider){\n            case \"gemini\":\n                result = await classifyWithGemini(text, apiKey);\n                break;\n            case \"anthropic\":\n                result = await classifyWithAnthropic(text, apiKey);\n                break;\n            case \"openai\":\n            default:\n                result = await classifyWithOpenAI(text, apiKey);\n        }\n        return {\n            aiProbability: result.ai_probability ?? result.aiProbability ?? 0,\n            reason: result.reason ?? \"No reason provided\"\n        };\n    } catch (error) {\n        console.error(`LLM Classification Error (${provider}):`, error);\n        return {\n            aiProbability: 0,\n            reason: \"Error in classification service\"\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBRWhDLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ08sU0FBUyxDQUFDLEVBQUU7QUFDaEM7QUFFTyxlQUFlSSxjQUNwQjVCLElBQVksRUFDWlIsTUFBZSxFQUNmcUMsV0FBd0IsUUFBUTtJQUVoQyxJQUFJO1FBQ0YsSUFBSVQ7UUFDSixPQUFRUztZQUNOLEtBQUs7Z0JBQ0hULFNBQVMsTUFBTUYsbUJBQW1CbEIsTUFBTVI7Z0JBQ3hDO1lBQ0YsS0FBSztnQkFDSDRCLFNBQVMsTUFBTU0sc0JBQXNCMUIsTUFBTVI7Z0JBQzNDO1lBQ0YsS0FBSztZQUNMO2dCQUNFNEIsU0FBUyxNQUFNckIsbUJBQW1CQyxNQUFNUjtRQUM1QztRQUVBLE9BQU87WUFDTHNDLGVBQWVWLE9BQU9XLGNBQWMsSUFBSVgsT0FBT1UsYUFBYSxJQUFJO1lBQ2hFRSxRQUFRWixPQUFPWSxNQUFNLElBQUk7UUFDM0I7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsMEJBQTBCLEVBQUVKLFNBQVMsRUFBRSxDQUFDLEVBQUVJO1FBQ3pELE9BQU87WUFBRUgsZUFBZTtZQUFHRSxRQUFRO1FBQWtDO0lBQ3ZFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS10d2VldC1maWx0ZXItYXBpLy4vc3JjL2xpYi9sbG0udHM/M2MzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIjtcbmltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gXCJAZ29vZ2xlL2dlbmVyYXRpdmUtYWlcIjtcbmltcG9ydCBBbnRocm9waWMgZnJvbSBcIkBhbnRocm9waWMtYWkvc2RrXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiLi9lbnZcIjtcblxuZXhwb3J0IHR5cGUgTExNUHJvdmlkZXIgPSBcIm9wZW5haVwiIHwgXCJnZW1pbmlcIiB8IFwiYW50aHJvcGljXCI7XG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IGVudi5PUEVOQUlfQVBJX0tFWSxcbn0pO1xuXG5jb25zdCBnZW1pbmkgPSBlbnYuR0VNSU5JX0FQSV9LRVlcbiAgPyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKGVudi5HRU1JTklfQVBJX0tFWSlcbiAgOiBudWxsO1xuY29uc3QgYW50aHJvcGljID0gZW52LkFOVEhST1BJQ19BUElfS0VZXG4gID8gbmV3IEFudGhyb3BpYyh7IGFwaUtleTogZW52LkFOVEhST1BJQ19BUElfS0VZIH0pXG4gIDogbnVsbDtcblxuY29uc3QgU1lTVEVNX1BST01QVCA9XG4gIFwiRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGZvbGxvd2luZyB0d2VldCBpcyBsaWtlbHkgQUktZ2VuZXJhdGVkIG9yIHdyaXR0ZW4gYnkgYSByZWFsIGh1bWFuLiBSZXNwb25kIEpTT046IHsgYWlfcHJvYmFiaWxpdHk6IDAtMSwgcmVhc29uOiBzdHJpbmcgfS5cIjtcblxuYXN5bmMgZnVuY3Rpb24gY2xhc3NpZnlXaXRoT3BlbkFJKHRleHQ6IHN0cmluZywgYXBpS2V5Pzogc3RyaW5nKSB7XG4gIGNvbnN0IGNsaWVudCA9IGFwaUtleSA/IG5ldyBPcGVuQUkoeyBhcGlLZXkgfSkgOiBvcGVuYWk7XG4gIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgIG1lc3NhZ2VzOiBbXG4gICAgICB7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQ6IFNZU1RFTV9QUk9NUFQgfSxcbiAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGBUd2VldDogJHt0ZXh0fWAgfSxcbiAgICBdLFxuICAgIG1vZGVsOiBcImdwdC0zLjUtdHVyYm9cIixcbiAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0sXG4gICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgfSk7XG5cbiAgY29uc3QgY29udGVudCA9IGNvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG4gIGlmICghY29udGVudCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGVudCByZWNlaXZlZCBmcm9tIE9wZW5BSVwiKTtcbiAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNsYXNzaWZ5V2l0aEdlbWluaSh0ZXh0OiBzdHJpbmcsIGFwaUtleT86IHN0cmluZykge1xuICBjb25zdCBjbGllbnQgPSBhcGlLZXkgPyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKGFwaUtleSkgOiBnZW1pbmk7XG4gIGlmICghY2xpZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJHZW1pbmkgQVBJIGtleSBub3QgY29uZmlndXJlZFwiKTtcblxuICBjb25zdCBtb2RlbCA9IGNsaWVudC5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogXCJnZW1pbmktcHJvXCIgfSk7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChcbiAgICBgJHtTWVNURU1fUFJPTVBUfVxcblxcblR3ZWV0OiAke3RleHR9YFxuICApO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5yZXNwb25zZTtcbiAgY29uc3QgdGV4dFJlc3BvbnNlID0gcmVzcG9uc2UudGV4dCgpO1xuXG4gIC8vIEdlbWluaSBtaWdodCB3cmFwIEpTT04gaW4gbWFya2Rvd24gY29kZSBibG9ja3NcbiAgY29uc3QganNvbk1hdGNoID0gdGV4dFJlc3BvbnNlLm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcbiAgaWYgKCFqc29uTWF0Y2gpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSlNPTiByZXNwb25zZSBmcm9tIEdlbWluaVwiKTtcblxuICByZXR1cm4gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjbGFzc2lmeVdpdGhBbnRocm9waWModGV4dDogc3RyaW5nLCBhcGlLZXk/OiBzdHJpbmcpIHtcbiAgY29uc3QgY2xpZW50ID0gYXBpS2V5ID8gbmV3IEFudGhyb3BpYyh7IGFwaUtleSB9KSA6IGFudGhyb3BpYztcbiAgaWYgKCFjbGllbnQpIHRocm93IG5ldyBFcnJvcihcIkFudGhyb3BpYyBBUEkga2V5IG5vdCBjb25maWd1cmVkXCIpO1xuXG4gIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBjbGllbnQubWVzc2FnZXMuY3JlYXRlKHtcbiAgICBtYXhfdG9rZW5zOiAxMDI0LFxuICAgIG1lc3NhZ2VzOiBbeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogYCR7U1lTVEVNX1BST01QVH1cXG5cXG5Ud2VldDogJHt0ZXh0fWAgfV0sXG4gICAgbW9kZWw6IFwiY2xhdWRlLTMtb3B1cy0yMDI0MDIyOVwiLFxuICB9KTtcblxuICBjb25zdCBjb250ZW50ID1cbiAgICBtZXNzYWdlLmNvbnRlbnRbMF0udHlwZSA9PT0gXCJ0ZXh0XCIgPyBtZXNzYWdlLmNvbnRlbnRbMF0udGV4dCA6IFwiXCI7XG4gIGlmICghY29udGVudCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGVudCByZWNlaXZlZCBmcm9tIEFudGhyb3BpY1wiKTtcblxuICAvLyBBbnRocm9waWMgbWlnaHQgd3JhcCBKU09OIGluIG1hcmtkb3duIGNvZGUgYmxvY2tzXG4gIGNvbnN0IGpzb25NYXRjaCA9IGNvbnRlbnQubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xuICBpZiAoIWpzb25NYXRjaCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBKU09OIHJlc3BvbnNlIGZyb20gQW50aHJvcGljXCIpO1xuXG4gIHJldHVybiBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGFzc2lmeVR3ZWV0KFxuICB0ZXh0OiBzdHJpbmcsXG4gIGFwaUtleT86IHN0cmluZyxcbiAgcHJvdmlkZXI6IExMTVByb3ZpZGVyID0gXCJvcGVuYWlcIlxuKTogUHJvbWlzZTx7IGFpUHJvYmFiaWxpdHk6IG51bWJlcjsgcmVhc29uOiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGxldCByZXN1bHQ7XG4gICAgc3dpdGNoIChwcm92aWRlcikge1xuICAgICAgY2FzZSBcImdlbWluaVwiOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBjbGFzc2lmeVdpdGhHZW1pbmkodGV4dCwgYXBpS2V5KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYW50aHJvcGljXCI6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGNsYXNzaWZ5V2l0aEFudGhyb3BpYyh0ZXh0LCBhcGlLZXkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJvcGVuYWlcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGNsYXNzaWZ5V2l0aE9wZW5BSSh0ZXh0LCBhcGlLZXkpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBhaVByb2JhYmlsaXR5OiByZXN1bHQuYWlfcHJvYmFiaWxpdHkgPz8gcmVzdWx0LmFpUHJvYmFiaWxpdHkgPz8gMCxcbiAgICAgIHJlYXNvbjogcmVzdWx0LnJlYXNvbiA/PyBcIk5vIHJlYXNvbiBwcm92aWRlZFwiLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgTExNIENsYXNzaWZpY2F0aW9uIEVycm9yICgke3Byb3ZpZGVyfSk6YCwgZXJyb3IpO1xuICAgIHJldHVybiB7IGFpUHJvYmFiaWxpdHk6IDAsIHJlYXNvbjogXCJFcnJvciBpbiBjbGFzc2lmaWNhdGlvbiBzZXJ2aWNlXCIgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk9wZW5BSSIsIkdvb2dsZUdlbmVyYXRpdmVBSSIsIkFudGhyb3BpYyIsImVudiIsIm9wZW5haSIsImFwaUtleSIsIk9QRU5BSV9BUElfS0VZIiwiZ2VtaW5pIiwiR0VNSU5JX0FQSV9LRVkiLCJhbnRocm9waWMiLCJBTlRIUk9QSUNfQVBJX0tFWSIsIlNZU1RFTV9QUk9NUFQiLCJjbGFzc2lmeVdpdGhPcGVuQUkiLCJ0ZXh0IiwiY2xpZW50IiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJtb2RlbCIsInJlc3BvbnNlX2Zvcm1hdCIsInR5cGUiLCJ0ZW1wZXJhdHVyZSIsImNob2ljZXMiLCJtZXNzYWdlIiwiRXJyb3IiLCJKU09OIiwicGFyc2UiLCJjbGFzc2lmeVdpdGhHZW1pbmkiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJyZXNwb25zZSIsInRleHRSZXNwb25zZSIsImpzb25NYXRjaCIsIm1hdGNoIiwiY2xhc3NpZnlXaXRoQW50aHJvcGljIiwibWF4X3Rva2VucyIsImNsYXNzaWZ5VHdlZXQiLCJwcm92aWRlciIsImFpUHJvYmFiaWxpdHkiLCJhaV9wcm9iYWJpbGl0eSIsInJlYXNvbiIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/llm.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\"\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUVqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBSztRQUFDO0tBQVE7QUFDaEIsR0FBRztBQUVMLElBQUlDLElBQXFDLEVBQUVKLGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXR3ZWV0LWZpbHRlci1hcGkvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYTogUHJpc21hQ2xpZW50IH07XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hIHx8XG4gIG5ldyBQcmlzbWFDbGllbnQoe1xuICAgIGxvZzogW1wicXVlcnlcIl0sXG4gIH0pO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbCIsInByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ratelimit.ts":
/*!******************************!*\
  !*** ./src/lib/ratelimit.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit)\n/* harmony export */ });\nconst store = {};\nconst WINDOW_SIZE_MS = 60 * 1000; // 1 minute\nconst MAX_REQUESTS = 60; // 60 requests per minute\nfunction rateLimit(ip) {\n    const now = Date.now();\n    const record = store[ip];\n    if (!record || now > record.resetTime) {\n        store[ip] = {\n            count: 1,\n            resetTime: now + WINDOW_SIZE_MS\n        };\n        return {\n            success: true\n        };\n    }\n    if (record.count >= MAX_REQUESTS) {\n        return {\n            success: false,\n            reset: record.resetTime\n        };\n    }\n    record.count++;\n    return {\n        success: true\n    };\n}\n// Cleanup old entries periodically\nsetInterval(()=>{\n    const now = Date.now();\n    for(const ip in store){\n        if (now > store[ip].resetTime) {\n            delete store[ip];\n        }\n    }\n}, WINDOW_SIZE_MS);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhdGVsaW1pdC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBU0EsTUFBTUEsUUFBd0IsQ0FBQztBQUMvQixNQUFNQyxpQkFBaUIsS0FBSyxNQUFNLFdBQVc7QUFDN0MsTUFBTUMsZUFBZSxJQUFJLHlCQUF5QjtBQUUzQyxTQUFTQyxVQUFVQyxFQUFVO0lBQ2xDLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7SUFDcEIsTUFBTUUsU0FBU1AsS0FBSyxDQUFDSSxHQUFHO0lBRXhCLElBQUksQ0FBQ0csVUFBVUYsTUFBTUUsT0FBT0MsU0FBUyxFQUFFO1FBQ3JDUixLQUFLLENBQUNJLEdBQUcsR0FBRztZQUNWSyxPQUFPO1lBQ1BELFdBQVdILE1BQU1KO1FBQ25CO1FBQ0EsT0FBTztZQUFFUyxTQUFTO1FBQUs7SUFDekI7SUFFQSxJQUFJSCxPQUFPRSxLQUFLLElBQUlQLGNBQWM7UUFDaEMsT0FBTztZQUFFUSxTQUFTO1lBQU9DLE9BQU9KLE9BQU9DLFNBQVM7UUFBQztJQUNuRDtJQUVBRCxPQUFPRSxLQUFLO0lBQ1osT0FBTztRQUFFQyxTQUFTO0lBQUs7QUFDekI7QUFFQSxtQ0FBbUM7QUFDbkNFLFlBQVk7SUFDVixNQUFNUCxNQUFNQyxLQUFLRCxHQUFHO0lBQ3BCLElBQUssTUFBTUQsTUFBTUosTUFBTztRQUN0QixJQUFJSyxNQUFNTCxLQUFLLENBQUNJLEdBQUcsQ0FBQ0ksU0FBUyxFQUFFO1lBQzdCLE9BQU9SLEtBQUssQ0FBQ0ksR0FBRztRQUNsQjtJQUNGO0FBQ0YsR0FBR0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS10d2VldC1maWx0ZXItYXBpLy4vc3JjL2xpYi9yYXRlbGltaXQudHM/YTJiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcblxuaW50ZXJmYWNlIFJhdGVMaW1pdFN0b3JlIHtcbiAgW2lwOiBzdHJpbmddOiB7XG4gICAgY291bnQ6IG51bWJlcjtcbiAgICByZXNldFRpbWU6IG51bWJlcjtcbiAgfTtcbn1cblxuY29uc3Qgc3RvcmU6IFJhdGVMaW1pdFN0b3JlID0ge307XG5jb25zdCBXSU5ET1dfU0laRV9NUyA9IDYwICogMTAwMDsgLy8gMSBtaW51dGVcbmNvbnN0IE1BWF9SRVFVRVNUUyA9IDYwOyAvLyA2MCByZXF1ZXN0cyBwZXIgbWludXRlXG5cbmV4cG9ydCBmdW5jdGlvbiByYXRlTGltaXQoaXA6IHN0cmluZykge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBjb25zdCByZWNvcmQgPSBzdG9yZVtpcF07XG5cbiAgaWYgKCFyZWNvcmQgfHwgbm93ID4gcmVjb3JkLnJlc2V0VGltZSkge1xuICAgIHN0b3JlW2lwXSA9IHtcbiAgICAgIGNvdW50OiAxLFxuICAgICAgcmVzZXRUaW1lOiBub3cgKyBXSU5ET1dfU0laRV9NUyxcbiAgICB9O1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuXG4gIGlmIChyZWNvcmQuY291bnQgPj0gTUFYX1JFUVVFU1RTKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHJlc2V0OiByZWNvcmQucmVzZXRUaW1lIH07XG4gIH1cblxuICByZWNvcmQuY291bnQrKztcbiAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xufVxuXG4vLyBDbGVhbnVwIG9sZCBlbnRyaWVzIHBlcmlvZGljYWxseVxuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBmb3IgKGNvbnN0IGlwIGluIHN0b3JlKSB7XG4gICAgaWYgKG5vdyA+IHN0b3JlW2lwXS5yZXNldFRpbWUpIHtcbiAgICAgIGRlbGV0ZSBzdG9yZVtpcF07XG4gICAgfVxuICB9XG59LCBXSU5ET1dfU0laRV9NUyk7XG4iXSwibmFtZXMiOlsic3RvcmUiLCJXSU5ET1dfU0laRV9NUyIsIk1BWF9SRVFVRVNUUyIsInJhdGVMaW1pdCIsImlwIiwibm93IiwiRGF0ZSIsInJlY29yZCIsInJlc2V0VGltZSIsImNvdW50Iiwic3VjY2VzcyIsInJlc2V0Iiwic2V0SW50ZXJ2YWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ratelimit.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/@anthropic-ai","vendor-chunks/next","vendor-chunks/form-data-encoder","vendor-chunks/zod","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/@google","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassify%2Froute&page=%2Fapi%2Fclassify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassify%2Froute.ts&appDir=%2FUsers%2Fpreyam%2Frepo%2FNoMoreBots%2Fapi%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpreyam%2Frepo%2FNoMoreBots%2Fapi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();